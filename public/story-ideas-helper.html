<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Story Ideas – Prompt Helper</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: system-ui, sans-serif; max-width: 640px; margin: 24px auto; padding: 0 16px; }
    h1 { font-size: 1.25rem; margin-bottom: 8px; }
    p { color: #444; font-size: 0.9rem; margin-bottom: 16px; }
    label { display: block; font-weight: 600; margin-bottom: 4px; font-size: 0.9rem; }
    select, input { padding: 8px 10px; margin-bottom: 12px; width: 100%; max-width: 280px; }
    .row { display: flex; gap: 12px; align-items: center; margin-bottom: 8px; }
    .row input { flex: 1; max-width: none; }
    .char-block { background: #f5f5f5; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
    .out { background: #1a1a1a; color: #e0e0e0; padding: 12px; border-radius: 8px; font-family: ui-monospace, monospace; font-size: 0.85rem; white-space: pre-wrap; word-break: break-word; margin-top: 8px; }
    .out-label { font-weight: 600; margin-top: 16px; margin-bottom: 4px; font-size: 0.9rem; }
    button { padding: 10px 16px; cursor: pointer; background: #2563eb; color: #fff; border: none; border-radius: 8px; font-weight: 600; margin-right: 8px; margin-top: 8px; }
    button:hover { background: #1d4ed8; }
    button.secondary { background: #64748b; }
    button.secondary:hover { background: #475569; }
    .hint { font-size: 0.8rem; color: #666; margin-top: 4px; }
    .callout { background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 12px 14px; margin-bottom: 20px; font-size: 0.9rem; line-height: 1.5; color: #0c4a6e; }
  </style>
</head>
<body>
  <h1>Story Ideas – Prompt Helper</h1>
  <p>Önce ChatGPT veya Gemini'de <strong>“Step 1”</strong> kutusundaki metni yapıştır. Sonra her hikaye için <strong>“Step 2”</strong> kutusundaki metni oluşturup kopyala ve AI’a gönder.</p>

  <div class="callout">
    <strong>Custom request'e ne yapıştıracaksın?</strong><br>
    Step 2 kutusundaki metni AI'a gönder. Dönen cevaptan <strong>"2) EXAMPLE STORY: …"</strong> paragrafını kopyala ve Create Book → Step 5 → Story Idea alanına yapıştır. Bu paragraf 12 sayfalık hikaye arc'ı (açılış → adımlar → kapanış) formatında olacaktır.
  </div>

  <label>Kategori</label>
  <select id="category">
    <option value="adventure">adventure</option>
    <option value="fairy_tale">fairy_tale</option>
    <option value="educational">educational</option>
    <option value="nature">nature</option>
    <option value="space">space</option>
    <option value="sports">sports</option>
  </select>

  <label>Yaş grubu</label>
  <select id="age">
    <option value="0-2">0-2</option>
    <option value="3-5">3-5</option>
    <option value="6-9">6-9</option>
  </select>

  <label>Karakter sayısı</label>
  <select id="numChars">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3" selected>3</option>
    <option value="4">4</option>
    <option value="5">5</option>
  </select>

  <div class="out-label">Karakterler (isim + rol)</div>
  <div id="charList"></div>
  <p class="hint">Örnek: Mia / child, Mom / mother, Sparky / dog</p>

  <button type="button" id="btnGen">Step 2 metnini oluştur</button>
  <button type="button" id="btnCopy" class="secondary">Step 2’yi kopyala</button>

  <div class="out-label">Step 2 – AI’a göndereceğin mesaj (kopyala)</div>
  <div id="output" class="out">adventure 0-2. Characters: Mia (child), Mom (mother), Sparky (dog).</div>

  <div class="out-label" style="margin-top: 24px;">Step 1 – Önce bunu ChatGPT/Gemini’ye bir kez yapıştır</div>
  <div id="systemPrompt" class="out"></div>
  <button type="button" id="btnCopySystem" class="secondary">Step 1’i kopyala</button>

  <script>
    const SYSTEM_PROMPT = `You are a children's book idea writer. I will send you: (1) category and age group, and (2) how many characters and who they are. You reply in English with exactly two parts:

1) TITLE: One short, catchy English title for the book.

2) EXAMPLE STORY: A single paragraph that describes a full story ARC that can fill exactly 12 pages. Maximum 500 characters (strict).

STORY ARC (CRITICAL — match this structure):
- The story must have clear STEPS that a 12-page book can follow: opening (who, where, what situation) → preparation or first actions → journey/development (several distinct steps: travel, explore, discover, face a small problem) → resolution of that problem → clear, satisfying ending.
- Write as one flowing sentence or two, with steps connected by commas and "and". Example shape: "[Character(s)] [open/start/prepare], [step 2], [step 3], [step 4], [small obstacle or challenge], [step to resolve it], and [ending]."
- Good examples: "Mia and Dad plan a camping mission, pack together, travel to a campsite, build a tent, explore nearby trails, solve one small problem, and end the night safely inside the tent." Or: "Leo builds a map with crayons, chooses three stops in the park, solves simple clues at each stop, and reaches a picnic ending where he celebrates his mini quest."
- Each step = one or more pages. So give enough steps (roughly 5–8 distinct story beats) so that 12 pages can spread naturally across them. Avoid a single repeated scene; avoid one-note ideas that force 12 identical moments.

STYLE:
- Flowing prose: confident, vivid, age-appropriate. No baby talk. Simple words for 0-2, clearer sentences for 3-5, slightly richer for 6-9.
- One clear premise: a specific situation (small quest, problem to solve, discovery, moment of courage or kindness). Dense but readable.
- Sensory details where they fit (see, hear, feel). Dialogue only if it naturally moves the arc.
- CRITICAL: Invent a new situation every time. Vary premise, setting, and mood. Match the category (adventure, fairy_tale, educational, nature, space, sports).

AVOID:
- One-note ideas (e.g. "child stands in backyard watching firefly" with no steps). Give the story room to develop across 12 pages.
- Choppy lists or only 1–2 steps. We need a real arc: beginning, middle steps, small crisis or challenge, resolution, ending.
- Repeating the same premise across requests. Each story must feel distinct.

This text will be used as the "custom request" for a story generator that produces a full 12-page book — your paragraph sets the opening and the step-by-step journey direction.

Valid categories: adventure, fairy_tale, educational, nature, space, sports.
Valid age groups: 0-2, 3-5, 6-9.`;

    const placeholders = [
      ['Mia', 'child'],
      ['Mom', 'mother'],
      ['Sparky', 'dog']
    ];

    const categoryEl = document.getElementById('category');
    const ageEl = document.getElementById('age');
    const numCharsEl = document.getElementById('numChars');
    const charListEl = document.getElementById('charList');
    const outputEl = document.getElementById('output');
    const systemPromptEl = document.getElementById('systemPrompt');

    systemPromptEl.textContent = SYSTEM_PROMPT;

    function renderChars() {
      const n = parseInt(numCharsEl.value, 10);
      charListEl.innerHTML = '';
      for (let i = 0; i < n; i++) {
        const p = placeholders[i] || ['', ''];
        const div = document.createElement('div');
        div.className = 'char-block';
        div.innerHTML = `
          <label>Karakter ${i + 1}</label>
          <div class="row">
            <input type="text" placeholder="İsim" data-name="${i}" value="${p[0]}" />
            <input type="text" placeholder="Rol (child, mother, dog, friend…)" data-role="${i}" value="${p[1]}" />
          </div>
        `;
        charListEl.appendChild(div);
      }
    }

    function buildMessage() {
      const cat = categoryEl.value;
      const age = ageEl.value;
      const parts = [`${cat} ${age}.`];
      const charParts = [];
      charListEl.querySelectorAll('.char-block').forEach(block => {
        const name = block.querySelector('[data-name]').value.trim();
        const role = block.querySelector('[data-role]').value.trim();
        if (name || role) charParts.push(`${name || '?'} (${role || 'character'})`);
      });
      if (charParts.length) parts.push(' Characters: ' + charParts.join(', ') + '.');
      return parts.join('');
    }

    numCharsEl.addEventListener('change', renderChars);
    document.getElementById('btnGen').addEventListener('click', () => {
      outputEl.textContent = buildMessage();
    });
    document.getElementById('btnCopy').addEventListener('click', () => {
      outputEl.textContent = buildMessage();
      navigator.clipboard.writeText(outputEl.textContent);
      document.getElementById('btnCopy').textContent = 'Kopyalandı';
      setTimeout(() => { document.getElementById('btnCopy').textContent = "Step 2'yi kopyala"; }, 1500);
    });
    document.getElementById('btnCopySystem').addEventListener('click', () => {
      navigator.clipboard.writeText(SYSTEM_PROMPT);
      document.getElementById('btnCopySystem').textContent = 'Kopyalandı';
      setTimeout(() => { document.getElementById('btnCopySystem').textContent = "Step 1'i kopyala"; }, 1500);
    });

    renderChars();
    outputEl.textContent = buildMessage();
  </script>
</body>
</html>
